<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>fort_test: fort_test</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">fort_test
   &#160;<span id="projectnumber">v1.1.0</span>
   </div>
   <div id="projectbrief">Simple testing framework for Fortran</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title"><a class="el" href="namespacefort__test.html" title="The fort_test module. ">fort_test</a> </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Very lightweight testing framework for FORTRAN, written entirely in FORTRAN. Supports basic assertions and running of test sets.</p>
<h2>Installation</h2>
<p>Clone the <a class="el" href="namespacefort__test.html" title="The fort_test module. ">fort_test</a> repo into your project directory</p>
<h2>Usage</h2>
<p>Simply type</p>
<div class="fragment"><div class="line">use fort_tests</div></div><!-- fragment --><p>At the top of your file. You can make a <a class="el" href="runtests_8f90.html">runtests.f90</a> file that can compile to a runtests executable to perform all of your tests without compiling the main program you're working on. I have included a basic makefile and example <a class="el" href="runtests_8f90.html">runtests.f90</a> file to show how you could do this</p>
<p>To make a test file, first declare at least one <code>TestSet</code> structure and (optionally) a named array of <code>TestSet</code>s.</p>
<div class="fragment"><div class="line"><span class="keywordtype">type</span>(testset):: testset_1, testset_2</div><div class="line"><span class="keywordtype">type</span>(testset), <span class="keywordtype">dimension(:)</span>, <span class="keywordtype">allocatable</span>:: my_testsets</div></div><!-- fragment --><p>Next, use the <code>new_testset</code> constructor to build (and optionally name) your testsets and fill them with tests. To see the results of your tests, call the <code>print_results</code> subroutine, which takes an array of <code>TestSets</code> as an argument</p>
<div class="fragment"><div class="line">testset_1 = new_testset(    &amp;</div><div class="line">  (/                        &amp;</div><div class="line">    assert(.true.),         &amp;</div><div class="line">    assert_eq(2.0, 1.0 + 1.0),  &amp;</div><div class="line">    assert_neq(2.0, 2.0 + 2.0), &amp;</div><div class="line">    assert_approx(4.d0, 4.d0 + 10.d0*epsilon(4.d0)) &amp;</div><div class="line">  /),                       &amp;</div><div class="line">  name = <span class="stringliteral">&quot;Sample test set&quot;</span>  &amp;</div><div class="line">)</div><div class="line"></div><div class="line">my_testsets = (/ testset_1 /)</div><div class="line"><span class="keyword">call </span>print_results(my_testsets)</div></div><!-- fragment --><p>All of our tests are self evidently correct, so we should get the following output, all nicely colored:</p>
<div class="image">
<img src="https://i.ibb.co/VJLQpMk/test-pic-1.png" alt="Test output 1"/>
</div>
<p>Lets make some tests that fail now. We'll copy our first testset and make all of the tests fail.</p>
<div class="fragment"><div class="line">testset_2 = new_testset(    &amp;</div><div class="line">  (/                        &amp;</div><div class="line">    assert(.false.),         &amp;</div><div class="line">    assert_eq(3.0, 1.0 + 1.0),  &amp;</div><div class="line">    assert_neq(4.0, 2.0 + 2.0), &amp;</div><div class="line">    assert_approx(3.d0, 4.d0 + 10.d0*epsilon(4.d0)) &amp;</div><div class="line">  /),                       &amp;</div><div class="line">  name = <span class="stringliteral">&quot;Failing test set&quot;</span>  &amp;</div><div class="line">)</div><div class="line"></div><div class="line">my_testsets = (/ testset_1, testset_2 /)</div><div class="line"><span class="keyword">call </span>print_results(my_testsets)</div></div><!-- fragment --><div class="image">
<img src="https://i.ibb.co/VNJ9b5d/test-pic-2.png" alt="Test output 2"/>
</div>
<p>The program provides minimal but helpful messages here. It doesn't have the ability to read the line of sourcecode that produced the error so we can only use whatever arguments you pass in. The message for a failing test using the basic 'assert' function will always be pretty sparse, but the test numbers will help you figure out which line of code is failing. Use the other assertion functions if you want more detailed readout.</p>
<p>That about concludes the basic tutorial. More documentation will be coming in the future! Please let me know if you have any questions or if you have functionality you'd like included. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
